(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7118],{157:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5935).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1778:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(72),l=t(4),r=t(983),i=t(6316),c=t.n(i),d=t(8033),n=t(8492),h=t(157),x=t(5935);let m=(0,x.A)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),o=(0,x.A)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var y=t(5579);let j=(0,x.A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);var u=t(1035);function v(){(0,r.useRouter)();let[e,s]=(0,l.useState)(null),[t,i]=(0,l.useState)(null),[x,v]=(0,l.useState)(!0),[g,b]=(0,l.useState)(null),[f,p]=(0,l.useState)(!0),N=async()=>{try{let e=await fetch("/api/performance-monitor/metrics"),t=await fetch("/api/performance-monitor/dashboard");if(!e.ok||!t.ok)throw Error("Failed to fetch metrics");let a=await e.json(),l=await t.json();s(a),i(l),b(null)}catch(e){console.error("Error fetching metrics:",e),b((null==e?void 0:e.message)||"An error occurred")}finally{v(!1)}};(0,l.useEffect)(()=>{if(N(),f){let e=setInterval(N,5e3);return()=>clearInterval(e)}},[f]);let w=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][s]};return x?(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-600"})})}):(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"System Monitoring - LeafyHealth"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"System Monitoring"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:f,onChange:e=>p(e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Auto-refresh"})]}),(0,a.jsx)("button",{onClick:N,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Refresh Now"})]})]}),g&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600",children:["Error loading metrics: ",g]}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.j,{className:"p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"System Health"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"text-5xl font-bold ".concat(t.overview.healthScore>=80?"text-green-600":t.overview.healthScore>=60?"text-yellow-600":"text-red-600"),children:[t.overview.healthScore,"%"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:t.overview.status}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Last updated:"," ",new Date(t.overview.lastUpdated).toLocaleTimeString()]})]})]})]}),(0,a.jsx)("div",{className:"w-24 h-24 rounded-full flex items-center justify-center ".concat(t.overview.healthScore>=80?"bg-green-100":t.overview.healthScore>=60?"bg-yellow-100":"bg-red-100"),children:t.overview.healthScore>=80?(0,a.jsx)(n.A,{className:"w-12 h-12 text-green-600"}):(0,a.jsx)(h.A,{className:"w-12 h-12 text-yellow-600"})})]})}),t.alerts&&t.alerts.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Active Alerts"}),(0,a.jsx)("div",{className:"space-y-2",children:t.alerts.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg border ".concat("critical"===e.level?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 ".concat("critical"===e.level?"text-red-600":"text-yellow-600")}),(0,a.jsx)("span",{className:"font-medium ".concat("critical"===e.level?"text-red-800":"text-yellow-800"),children:e.message})]}),e.services&&(0,a.jsxs)("div",{className:"mt-2 ml-7 text-sm text-gray-600",children:["Services: ",e.services.join(", ")]})]},s))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,a.jsxs)(d.j,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"CPU Usage"}),(0,a.jsx)(m,{className:"w-6 h-6 text-gray-400"})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-800",children:t.system.cpu}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Load Average: ",null==e?void 0:e.system.cpu.loadAverage.map(e=>e.toFixed(2)).join(", ")]})]}),(0,a.jsxs)(d.j,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Memory Usage"}),(0,a.jsx)(o,{className:"w-6 h-6 text-gray-400"})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-800",children:t.system.memory}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:[w((null==e?void 0:e.system.memory.used)||0)," /"," ",w((null==e?void 0:e.system.memory.total)||0)]})]}),(0,a.jsxs)(d.j,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"System Uptime"}),(0,a.jsx)(y.A,{className:"w-6 h-6 text-gray-400"})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-800",children:t.system.uptime}),(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"Since last restart"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(d.j,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Services Status"}),(0,a.jsx)(j,{className:"w-6 h-6 text-gray-400"})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[t.services.healthy," / ",t.services.total," Healthy"]})}),(0,a.jsx)("div",{className:"space-y-2",children:t.services.details.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("healthy"===e.status?"bg-green-500":"unhealthy"===e.status?"bg-yellow-500":"bg-red-500")}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsx)("span",{className:(e=>{switch(e){case"healthy":return"text-green-600";case"unhealthy":return"text-yellow-600";case"offline":return"text-red-600";default:return"text-gray-600"}})(e.status),children:e.status}),e.responseTime>0&&(0,a.jsxs)("span",{className:"text-gray-500",children:[e.responseTime,"ms"]})]})]},e.name))})]}),(0,a.jsxs)(d.j,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Database Status"}),(0,a.jsx)(u.A,{className:"w-6 h-6 text-gray-400"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,a.jsx)("span",{className:"font-medium ".concat(t.database.healthy?"text-green-600":"text-red-600"),children:t.database.healthy?"Healthy":"Unhealthy"})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Active Connections"}),(0,a.jsx)("span",{className:"font-medium",children:t.database.activeConnections})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Database Size"}),(0,a.jsx)("span",{className:"font-medium",children:w(t.database.databaseSize)})]})})]})]})]})]})]})]})}},4018:(e,s,t)=>{"use strict";t.d(s,{cn:()=>r});var a=t(115),l=t(7399);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.QP)((0,a.$)(s))}},5288:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitoring",function(){return t(1778)}])},5579:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5935).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},6316:(e,s,t)=>{e.exports=t(5938)},8033:(e,s,t)=>{"use strict";t.d(s,{j:()=>r});var a=t(72);t(4);var l=t(4018);function r(e){let{children:s,className:t,variant:r="default",...i}=e;return(0,a.jsx)("div",{className:(0,l.cn)("rounded-2xl transition-all duration-300",{default:"bg-white/80 backdrop-blur-md border border-white/20 shadow-lg",elevated:"bg-white/90 backdrop-blur-lg border border-white/30 shadow-xl",subtle:"bg-white/60 backdrop-blur-sm border border-white/10 shadow-md"}[r],t),...i,children:s})}},8492:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5935).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])}},e=>{e.O(0,[9257,636,6593,8792],()=>e(e.s=5288)),_N_E=e.O()}]);