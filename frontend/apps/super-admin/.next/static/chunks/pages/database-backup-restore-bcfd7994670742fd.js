(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5495],{347:(e,s,a)=>{"use strict";a.d(s,{BT:()=>i,Wu:()=>n,ZB:()=>c,Zp:()=>l,aR:()=>r});var t=a(72);a(4);let l=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"bg-white border rounded-lg shadow ".concat(a),children:s})},r=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"px-6 py-4 border-b ".concat(a),children:s})},c=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("h3",{className:"text-lg font-semibold ".concat(a),children:s})},i=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1 ".concat(a),children:s})},n=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"px-6 py-4 ".concat(a),children:s})}},1703:(e,s,a)=>{"use strict";a.d(s,{p:()=>l});var t=a(72);let l=a(4).forwardRef((e,s)=>{let{className:a="",...l}=e;return(0,t.jsx)("input",{ref:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed ".concat(a),...l})});l.displayName="Input"},2628:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/database-backup-restore",function(){return a(9365)}])},3413:(e,s,a)=>{"use strict";a.d(s,{$:()=>l});var t=a(72);let l=a(4).forwardRef((e,s)=>{let{children:a,className:l="",size:r="md",variant:c="default",...i}=e;return(0,t.jsx)("button",{ref:s,className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[r]," ").concat({default:"bg-blue-600 text-white hover:bg-blue-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",destructive:"bg-red-600 text-white hover:bg-red-700"}[c]," disabled:opacity-50 disabled:cursor-not-allowed ").concat(l),...i,children:a})});l.displayName="Button"},4018:(e,s,a)=>{"use strict";a.d(s,{cn:()=>r});var t=a(115),l=a(7399);function r(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.QP)((0,t.$)(s))}},4206:(e,s,a)=>{"use strict";a.d(s,{E:()=>l});var t=a(72);a(4);let l=e=>{let{children:s,variant:a="default",className:l=""}=e;return(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({default:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",destructive:"bg-red-100 text-red-800"}[a]," ").concat(l),children:s})}},7101:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>m,Es:()=>h,L3:()=>p,c7:()=>u,lG:()=>n,rr:()=>f,zM:()=>d});var t=a(72),l=a(4),r=a(9800),c=a(6417),i=a(4018);let n=r.bL,d=r.l9,o=r.ZL;r.bm;let x=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});x.displayName=r.hJ.displayName;let m=l.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(r.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[l,(0,t.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.UC.displayName;let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};u.displayName="DialogHeader";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="DialogFooter";let p=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});p.displayName=r.hE.displayName;let f=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});f.displayName=r.VY.displayName},7937:(e,s,a)=>{"use strict";a.d(s,{bq:()=>m,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>x});var t=a(72),l=a(4),r=a(3677),c=a(3488),i=a(8085),n=a(6478),d=a(4018);let o=r.bL;r.YJ;let x=r.WT,m=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(r.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[l,(0,t.jsx)(r.In,{asChild:!0,children:(0,t.jsx)(c.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.l9.displayName;let u=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=r.PP.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})});h.displayName=r.wn.displayName;let p=l.forwardRef((e,s)=>{let{className:a,children:l,position:c="popper",...i}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsxs)(r.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...i,children:[(0,t.jsx)(u,{}),(0,t.jsx)(r.LM,{className:(0,d.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(h,{})]})})});p.displayName=r.UC.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=r.JU.displayName;let f=l.forwardRef((e,s)=>{let{className:a,children:l,...c}=e;return(0,t.jsxs)(r.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})}),(0,t.jsx)(r.p4,{children:l})]})});f.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=r.wv.displayName},9365:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(72),l=a(4),r=a(347),c=a(3413),i=a(4206),n=a(9521),d=a(7101),o=a(1703),x=a(9825),m=a(7937),u=a(157),h=a(3831),p=a(1035),f=a(8628),j=a(5506),y=a(400),b=a(6166),N=a(163),g=a(5595);function v(){let[e,s]=(0,l.useState)([]),[a,v]=(0,l.useState)([]),[w,k]=(0,l.useState)([]),[C,S]=(0,l.useState)(null),[A,R]=(0,l.useState)(!1),[B,E]=(0,l.useState)(null),[z,F]=(0,l.useState)("checking"),[_,D]=(0,l.useState)("overview"),[T,P]=(0,l.useState)(!1),[L,Z]=(0,l.useState)(!1),[O,$]=(0,l.useState)(!1),[W,J]=(0,l.useState)(null),[U,I]=(0,l.useState)(!1),[q,X]=(0,l.useState)(null),[M,V]=(0,l.useState)("manual"),[G,Q]=(0,l.useState)(""),[H,Y]=(0,l.useState)("0 2 * * *"),[K,ee]=(0,l.useState)(30),[es,ea]=(0,l.useState)("full"),[et,el]=(0,l.useState)([]),er=async()=>{try{F("checking"),E(null);let e=await fetch("/api/backup-restore/health");if(e.ok){let s=await e.json();S(s),F("online")}else throw Error("Service returned ".concat(e.status))}catch(e){console.warn("Service health check failed:",e),F("offline"),S(null),E("Database backup service is offline")}},ec=async()=>{try{R(!0),E(null);let e=await fetch("/api/backup-restore/backup/jobs");if(e.ok){let a=await e.json();if(a.success&&Array.isArray(a.data)){let e=new Date;e.setDate(e.getDate()-7);let t=a.data.filter(s=>new Date(s.startedAt)>=e||"completed"===s.status).slice(0,20);s(t)}else s([])}else throw Error("Failed to fetch backup jobs: ".concat(e.status))}catch(e){console.warn("Failed to fetch backup jobs:",e),s([]),E("Failed to load backup history")}finally{R(!1)}},ei=async()=>{try{let e=await fetch("/api/backup-restore/restore/list");if(e.ok){let s=await e.json();s.success&&Array.isArray(s.data)?v(s.data):v([])}}catch(e){console.warn("Failed to fetch restore jobs:",e),v([])}},en=async()=>{try{let e=await fetch("/api/backup-restore/schedule/list");if(e.ok){let s=await e.json();s.success&&Array.isArray(s.data)?k(s.data):k([])}}catch(e){console.warn("Failed to fetch schedules:",e),k([])}},ed=async()=>{try{let e=await fetch("/api/backup-restore/backup/professional/list");if(e.ok){let s=await e.json();if(s.success&&Array.isArray(s.backups)){let e=s.backups.filter(e=>e.fileName.endsWith(".sql")||e.fileName.endsWith(".dump"));el(e)}else el([])}}catch(e){console.warn("Failed to fetch professional backups:",e),el([])}},eo=async()=>{try{R(!0),E(null);let e=await fetch("/api/backup-restore/backup/professional",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"full"===M?"custom":"logical"})});if(e.ok){let s=await e.json();s.success?(console.log("Professional backup created:",s.metadata),E(null),alert("Backup created successfully! File: ".concat(s.metadata.fileName,", Size: ").concat(s.metadata.fileSize))):E(s.message||"Backup failed"),P(!1),await ec(),await ed()}else{let s=await e.json();throw Error(s.message||"Backup creation failed: ".concat(e.status))}}catch(e){console.error("Failed to create backup:",e),E((null==e?void 0:e.message)||"Failed to create backup. Please try again.")}finally{R(!1)}},ex=async()=>{if(W)try{R(!0),E(null);let e=await fetch("/api/backup-restore/restore/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backupId:W.id,restoreType:es})});if(e.ok)$(!1),J(null),await ei();else throw Error("Restore failed: ".concat(e.status))}catch(e){console.warn("Failed to start restore:",e),E("Failed to start restore")}finally{R(!1)}},em=async()=>{try{R(!0),E(null);let e=await fetch("/api/backup-restore/schedule/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:G,cronExpression:H,backupType:M,retentionDays:K})});if(e.ok)Z(!1),Q(""),await en();else throw Error("Schedule creation failed: ".concat(e.status))}catch(e){console.warn("Failed to create schedule:",e),E("Failed to create schedule")}finally{R(!1)}},eu=async e=>{try{let s=await fetch("/api/backup-restore/backup/professional/download/".concat(encodeURIComponent(e)));if(!s.ok)throw Error("Failed to download backup");let a=await s.blob(),t=window.URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=e,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l)}catch(e){console.error("Failed to download backup:",e),alert("Failed to download backup. Please try again.")}},eh=async()=>{if(q)try{R(!0),E(null);let e=await fetch("/api/backup-restore/backup/".concat(q.jobId),{method:"DELETE"});if(e.ok){let s=await e.json();if(s.success)I(!1),X(null),await ec(),await ed();else throw Error(s.message||"Delete failed")}else{let s=await e.json();throw Error(s.message||"Delete failed: ".concat(e.status))}}catch(e){console.error("Failed to delete backup:",e),E((null==e?void 0:e.message)||"Failed to delete backup. Please try again.")}finally{R(!1)}},ep=async e=>{if(confirm("Are you sure you want to restore the database from ".concat(e,"? This will replace all current data.")))try{let s=await fetch("/api/backup-restore/backup/professional/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e})}),a=await s.json();if(a.success)alert("Database restored successfully in ".concat(a.duration,"!")),await Promise.all([ec(),ei(),ed()]);else throw Error(a.error||"Restore failed")}catch(e){console.error("Failed to restore backup:",e),alert("Failed to restore backup. Please try again.")}};(0,l.useEffect)(()=>{(async()=>{await er(),await Promise.all([ec(),ei(),en(),ed()])})().catch(e=>{console.warn("Failed to initialize page:",e),E("Failed to initialize database backup system")})},[]);let ef=e=>{try{return new Date(e).toLocaleString()}catch(s){return e||"Unknown"}},ej=e=>{let{status:s}=e;return(0,t.jsx)(i.E,{className:(e=>{switch(e.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"running":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(s),children:s})};return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Database Backup & Restore"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Professional PostgreSQL database management system"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("online"===z?"bg-green-500":"offline"===z?"bg-red-500":"bg-yellow-500")}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"online"===z?"Service Online":"offline"===z?"Service Offline":"Checking..."})]}),C&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Port ",C.port]})]})]}),B&&(0,t.jsx)(r.Zp,{className:"border-red-200 bg-red-50",children:(0,t.jsx)(r.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.A,{className:"text-red-400 mr-3",size:20}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,t.jsx)("p",{className:"text-red-700 text-sm mt-1",children:B})]})]})})}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"w-5 h-5"}),"Quick Actions"]}),(0,t.jsx)(r.BT,{children:"Essential backup and restore operations"})]}),(0,t.jsxs)(r.Wu,{className:"flex gap-4",children:[(0,t.jsxs)(d.lG,{open:T,onOpenChange:P,children:[(0,t.jsx)(d.zM,{asChild:!0,children:(0,t.jsxs)(c.$,{disabled:A||"online"!==z,children:[(0,t.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Create Backup"]})}),(0,t.jsxs)(d.Cf,{children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsx)(d.L3,{children:"Create Database Backup"}),(0,t.jsx)(d.rr,{children:"Create a new backup of your PostgreSQL database"})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{htmlFor:"backupType",children:"Backup Type"}),(0,t.jsxs)(m.l6,{value:M,onValueChange:V,children:[(0,t.jsx)(m.bq,{children:(0,t.jsx)(m.yv,{})}),(0,t.jsxs)(m.gC,{children:[(0,t.jsx)(m.eb,{value:"manual",children:"Manual Backup"}),(0,t.jsx)(m.eb,{value:"scheduled",children:"Scheduled Backup"}),(0,t.jsx)(m.eb,{value:"emergency",children:"Emergency Backup"})]})]})]})}),(0,t.jsxs)(d.Es,{children:[(0,t.jsx)(c.$,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),(0,t.jsx)(c.$,{onClick:eo,disabled:A,children:A?"Creating...":"Create Backup"})]})]})]}),(0,t.jsxs)(d.lG,{open:L,onOpenChange:Z,children:[(0,t.jsx)(d.zM,{asChild:!0,children:(0,t.jsxs)(c.$,{variant:"outline",disabled:A||"online"!==z,children:[(0,t.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Schedule Backup"]})}),(0,t.jsxs)(d.Cf,{children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsx)(d.L3,{children:"Create Backup Schedule"}),(0,t.jsx)(d.rr,{children:"Set up automated backup scheduling with cron expressions"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{htmlFor:"scheduleName",children:"Schedule Name"}),(0,t.jsx)(o.p,{id:"scheduleName",value:G,onChange:e=>Q(e.target.value),placeholder:"Daily Database Backup"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{htmlFor:"cronExpression",children:"Cron Expression"}),(0,t.jsx)(o.p,{id:"cronExpression",value:H,onChange:e=>Y(e.target.value),placeholder:"0 2 * * *"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Daily at 2:00 AM (0 2 * * *)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{htmlFor:"retentionDays",children:"Retention Days"}),(0,t.jsx)(o.p,{id:"retentionDays",type:"number",value:K,onChange:e=>ee(parseInt(e.target.value)),min:1,max:365})]})]}),(0,t.jsxs)(d.Es,{children:[(0,t.jsx)(c.$,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),(0,t.jsx)(c.$,{onClick:em,disabled:A||!G,children:A?"Creating...":"Create Schedule"})]})]})]}),(0,t.jsxs)(c.$,{variant:"outline",onClick:er,disabled:A,children:[(0,t.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Check Service"]})]})]}),(0,t.jsxs)(n.tU,{value:_,onValueChange:D,children:[(0,t.jsxs)(n.j7,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(n.Xi,{value:"overview",children:"Overview"}),(0,t.jsx)(n.Xi,{value:"backups",children:"Backups"}),(0,t.jsx)(n.Xi,{value:"restores",children:"Restores"}),(0,t.jsx)(n.Xi,{value:"schedules",children:"Schedules"})]}),(0,t.jsx)(n.av,{value:"overview",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ZB,{className:"text-sm font-medium",children:"Total Backups"}),(0,t.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.length}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.filter(e=>"completed"===e.status).length," completed"]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ZB,{className:"text-sm font-medium",children:"Active Schedules"}),(0,t.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:w.filter(e=>e.is_active).length}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[w.length," total schedules"]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ZB,{className:"text-sm font-medium",children:"Recent Restores"}),(0,t.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:a.length}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.filter(e=>"completed"===e.status).length," successful"]})]})]})]})}),(0,t.jsxs)(n.av,{value:"backups",className:"space-y-6",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"Backup History"}),(0,t.jsx)(r.BT,{children:"Complete list of database backup operations"})]}),(0,t.jsx)(r.Wu,{children:A&&0===e.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(j.A,{className:"w-8 h-8 mx-auto mb-4 animate-spin"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading backup history..."})]}):0===e.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(p.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No backup jobs found"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first backup to see it here"})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left py-3",children:"Job ID"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Type"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Status"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Size"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Started"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Completed"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-3 font-mono text-xs",children:e.jobId}),(0,t.jsx)("td",{className:"py-3 capitalize",children:e.type}),(0,t.jsx)("td",{className:"py-3",children:(0,t.jsx)(ej,{status:e.status})}),(0,t.jsx)("td",{className:"py-3",children:e.fileSize||"N/A"}),(0,t.jsx)("td",{className:"py-3",children:ef(e.startedAt)}),(0,t.jsx)("td",{className:"py-3",children:e.completedAt?ef(e.completedAt):"N/A"}),(0,t.jsx)("td",{className:"py-3",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>{J(e),$(!0)},disabled:"completed"!==e.status,children:[(0,t.jsx)(y.A,{className:"w-3 h-3 mr-1"}),"Restore"]}),e.fileName&&(0,t.jsxs)(c.$,{size:"sm",variant:"outline",children:[(0,t.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"Download"]}),(0,t.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>{X(e),I(!0)},children:[(0,t.jsx)(N.A,{className:"w-3 h-3 mr-1"}),"Delete"]})]})})]},e.id))})]})})})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"Professional PostgreSQL Backups"}),(0,t.jsx)(r.BT,{children:"Production-grade pg_dump backups (zero downtime)"}),(0,t.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-blue-900",children:"Backup Location:"}),(0,t.jsx)("p",{className:"text-blue-700 font-mono text-xs mt-1",children:"/home/runner/workspace/backend/domains/database-backup-restore/backups/"}),(0,t.jsx)("p",{className:"font-medium text-blue-900 mt-2",children:"Features:"}),(0,t.jsxs)("ul",{className:"text-blue-700 text-xs mt-1 ml-4 list-disc",children:[(0,t.jsx)("li",{children:"Logical (.sql) and Custom (.dump) format backups"}),(0,t.jsx)("li",{children:"Complete database structure and data"}),(0,t.jsx)("li",{children:"Professional restoration with conflict resolution"}),(0,t.jsx)("li",{children:"Checksum verification for integrity"})]})]})]}),(0,t.jsx)(r.Wu,{children:0===et.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(p.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No professional backups found"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Create a professional backup using the button above"})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left py-3",children:"Filename"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Type"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Size"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Created"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:et.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-3",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-mono text-xs",children:e.fileName}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Location: ",e.filePath]})]})}),(0,t.jsx)("td",{className:"py-3 capitalize",children:e.type}),(0,t.jsx)("td",{className:"py-3",children:e.fileSize||e.size}),(0,t.jsx)("td",{className:"py-3",children:ef(e.createdAt)}),(0,t.jsx)("td",{className:"py-3",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>eu(e.fileName),children:[(0,t.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"Download"]}),(0,t.jsxs)(c.$,{size:"sm",variant:"default",onClick:()=>ep(e.fileName),children:[(0,t.jsx)(j.A,{className:"w-3 h-3 mr-1"}),"Restore"]})]})})]},e.fileName))})]})})})]})]}),(0,t.jsx)(n.av,{value:"restores",className:"space-y-6",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"Restore Operations"}),(0,t.jsx)(r.BT,{children:"History of database restore operations"})]}),(0,t.jsx)(r.Wu,{children:0===a.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(j.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No restore operations found"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Restore operations will appear here"})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left py-3",children:"Restore ID"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Backup File"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Type"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Status"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Started"}),(0,t.jsx)("th",{className:"text-left py-3",children:"Completed"})]})}),(0,t.jsx)("tbody",{children:a.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"py-3 font-mono text-xs",children:["restore-",e.id]}),(0,t.jsx)("td",{className:"py-3",children:e.backup_file_name||"N/A"}),(0,t.jsx)("td",{className:"py-3 capitalize",children:e.restore_type}),(0,t.jsx)("td",{className:"py-3",children:(0,t.jsx)(ej,{status:e.status})}),(0,t.jsx)("td",{className:"py-3",children:e.started_at?ef(e.started_at):"N/A"}),(0,t.jsx)("td",{className:"py-3",children:e.completed_at?ef(e.completed_at):"N/A"})]},e.id))})]})})})]})}),(0,t.jsx)(n.av,{value:"schedules",className:"space-y-6",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"Backup Schedules"}),(0,t.jsx)(r.BT,{children:"Automated backup scheduling configuration"})]}),(0,t.jsx)(r.Wu,{children:0===w.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(f.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No backup schedules found"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Create a schedule to automate backups"})]}):(0,t.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,t.jsx)(r.Zp,{children:(0,t.jsx)(r.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.is_active?"bg-green-500":"bg-gray-400")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.cron_expression," • ",e.backup_type," backup •"," ",e.retention_days," days retention"]}),e.last_run_at&&(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["Last run: ",ef(e.last_run_at)]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.E,{variant:e.is_active?"default":"secondary",children:e.is_active?"Active":"Inactive"}),(0,t.jsx)(c.$,{size:"sm",variant:"outline",children:(0,t.jsx)(g.A,{className:"w-3 h-3"})})]})]})})},e.id))})})]})})]}),(0,t.jsx)(d.lG,{open:O,onOpenChange:$,children:(0,t.jsxs)(d.Cf,{children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsx)(d.L3,{children:"Restore Database"}),(0,t.jsx)(d.rr,{children:"Restore your database from the selected backup"})]}),W&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Selected Backup"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:W.fileName||W.jobId}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Created: ",ef(W.startedAt)," • Size:"," ",W.fileSize]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{htmlFor:"restoreType",children:"Restore Type"}),(0,t.jsxs)(m.l6,{value:es,onValueChange:ea,children:[(0,t.jsx)(m.bq,{children:(0,t.jsx)(m.yv,{})}),(0,t.jsxs)(m.gC,{children:[(0,t.jsx)(m.eb,{value:"full",children:"Full Restore"}),(0,t.jsx)(m.eb,{value:"schema_only",children:"Schema Only"}),(0,t.jsx)(m.eb,{value:"data_only",children:"Data Only"})]})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 text-yellow-600"}),(0,t.jsx)("span",{className:"font-medium text-yellow-800",children:"Warning"})]}),(0,t.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"This operation will overwrite your current database. This action cannot be undone."})]})]}),(0,t.jsxs)(d.Es,{children:[(0,t.jsx)(c.$,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),(0,t.jsx)(c.$,{onClick:ex,disabled:A,className:"bg-red-600 hover:bg-red-700",children:A?"Starting Restore...":"Start Restore"})]})]})}),(0,t.jsx)(d.lG,{open:U,onOpenChange:I,children:(0,t.jsxs)(d.Cf,{children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsx)(d.L3,{children:"Delete Backup"}),(0,t.jsx)(d.rr,{children:"Are you sure you want to delete this backup?"})]}),q&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Backup Details"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:q.fileName||q.jobId}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Created: ",ef(q.startedAt)," • Size:"," ",q.fileSize||"N/A"]})]}),(0,t.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 text-red-600"}),(0,t.jsx)("span",{className:"font-medium text-red-800",children:"Warning"})]}),(0,t.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"This action cannot be undone. The backup file will be permanently deleted."})]})]}),(0,t.jsxs)(d.Es,{children:[(0,t.jsx)(c.$,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),(0,t.jsx)(c.$,{onClick:eh,disabled:A,className:"bg-red-600 hover:bg-red-700",children:A?"Deleting...":"Delete Backup"})]})]})}),C&&(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-lg",children:"Service Information"})}),(0,t.jsx)(r.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Service:"}),(0,t.jsx)("div",{className:"font-medium",children:C.service})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Port:"}),(0,t.jsx)("div",{className:"font-medium",children:C.port})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,t.jsx)("div",{className:"font-medium",children:C.status})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Last Check:"}),(0,t.jsx)("div",{className:"font-medium",children:ef(C.timestamp)})]})]})})]})]})}},9521:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>d,av:()=>o,j7:()=>n,tU:()=>i});var t=a(72),l=a(4),r=a(362),c=a(4018);let i=r.bL,n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.B8,{ref:s,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...l})});n.displayName=r.B8.displayName;let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.l9,{ref:s,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...l})});d.displayName=r.l9.displayName;let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.UC,{ref:s,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l})});o.displayName=r.UC.displayName},9825:(e,s,a)=>{"use strict";a.d(s,{J:()=>l});var t=a(72);a(4);let l=e=>{let{className:s="",children:a,...l}=e;return(0,t.jsx)("label",{className:"".concat("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"," ").concat(s),...l,children:a})}}},e=>{e.O(0,[9257,4449,6066,636,6593,8792],()=>e(e.s=2628)),_N_E=e.O()}]);