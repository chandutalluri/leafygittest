(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4559],{21:(e,s,t)=>{"use strict";t.d(s,{v:()=>r});var a=t(72);function l(e){let{children:s,title:t,subtitle:l,icon:r="⚙️",showBackButton:i=!0}=e;return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:r})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t}),(0,a.jsx)("p",{className:"text-sm text-purple-600",children:l})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["System Status: ",(0,a.jsx)("span",{className:"text-green-600 font-medium",children:"Operational"})]}),i&&(0,a.jsx)("button",{onClick:()=>window.location.href="/superadmin/operational-dashboard",className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Back to Dashboard"})]})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"px-4 py-6 sm:px-0",children:s})}),(0,a.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-12",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"LeafyHealth Super Admin v1.1"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"System Management Interface"})]})})})]})}function r(e){return(0,a.jsx)(l,{...e})}},2590:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/compliance-audit",function(){return t(2685)}])},2685:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(72),l=t(4),r=t(21);function i(){let[e,s]=(0,l.useState)([]),[t,i]=(0,l.useState)([]),[d,n]=(0,l.useState)(null),[c,x]=(0,l.useState)(!0),[m,o]=(0,l.useState)("overview"),[h,p]=(0,l.useState)("7d"),[u,g]=(0,l.useState)("all");(0,l.useEffect)(()=>{j()},[]);let j=async()=>{try{x(!0);let r=await fetch("/api/compliance-audit"),d=await r.json();if(d.success&&d.data){var e,t,a,l;s(d.data.auditLogs||[]),i(d.data.complianceMetrics||[]);let r=(null==(e=d.data.complianceMetrics)?void 0:e.length)||0,c=(null==(t=d.data.complianceMetrics)?void 0:t.filter(e=>"compliant"===e.status).length)||0,x=(null==(a=d.data.complianceMetrics)?void 0:a.filter(e=>"non-compliant"===e.status).length)||0,m=(null==(l=d.data.complianceMetrics)?void 0:l.filter(e=>"under-review"===e.status).length)||0;n({totalRequirements:r,compliantRequirements:c,nonCompliantRequirements:x,underReviewRequirements:m})}}catch(e){console.error("Error loading compliance data:",e)}finally{x(!1)}},N=e=>{switch(e){case"success":case"compliant":return"bg-green-100 text-green-800";case"failed":case"non-compliant":return"bg-red-100 text-red-800";case"warning":case"under-review":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},y=e.filter(e=>{if("all"!==u&&e.status!==u)return!1;let s=new Date(e.timestamp),t=Math.floor((new Date().getTime()-s.getTime())/864e5);switch(h){case"1d":return t<=1;case"7d":return t<=7;case"30d":return t<=30;case"90d":return t<=90;default:return!0}});return c?(0,a.jsx)(r.v,{title:"Compliance Audit",subtitle:"Regulatory Compliance and Auditing",icon:"\uD83D\uDCCB",showBackButton:!0,children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})})}):(0,a.jsxs)(r.v,{title:"Compliance Audit",subtitle:"Regulatory Compliance and Auditing",icon:"\uD83D\uDCCB",showBackButton:!0,children:[(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:"⚖️"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-amber-800",children:"Compliance Management"}),(0,a.jsx)("p",{className:"text-amber-700 text-sm",children:"Monitor regulatory compliance, audit trails, and security requirements to ensure full regulatory adherence."})]})]})}),d&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Requirements"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:d.totalRequirements})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"text-2xl",children:"✅"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Compliant"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-green-600",children:d.compliantRequirements})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"text-2xl",children:"❌"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Non-Compliant"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-red-600",children:d.nonCompliantRequirements})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"text-2xl",children:"⏳"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Under Review"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-yellow-600",children:d.underReviewRequirements})]})})]})})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview",icon:"\uD83D\uDCCA"},{id:"audit-logs",name:"Audit Logs",icon:"\uD83D\uDCCB"},{id:"compliance",name:"Compliance",icon:"⚖️"},{id:"reports",name:"Reports",icon:"\uD83D\uDCC4"}].map(e=>(0,a.jsxs)("button",{onClick:()=>o(e.id),className:"".concat(m===e.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2"),children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.name})]},e.id))})})}),"audit-logs"===m&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-100 p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Audit Logs"}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"1d",children:"Last 24 hours"}),(0,a.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,a.jsx)("option",{value:"all",children:"All time"})]}),(0,a.jsxs)("select",{value:u,onChange:e=>g(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All statuses"}),(0,a.jsx)("option",{value:"success",children:"Success"}),(0,a.jsx)("option",{value:"failed",children:"Failed"}),(0,a.jsx)("option",{value:"warning",children:"Warning"})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resource"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.timestamp).toLocaleString()})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.user})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.action})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.resource})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(N(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.ipAddress})})]},e.id))})]})})]})}),"compliance"===m&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-100 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Compliance Requirements"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Standard"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requirement"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Responsible"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Review"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.standard})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.requirement})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(N(e.status)),children:e.status.replace("-"," ")})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority)),children:e.priority})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.responsible})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.nextReview).toLocaleDateString()})})]},e.id))})]})})]})}),"overview"===m&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-100 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Compliance Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"Compliance Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[d?Math.round(d.compliantRequirements/d.totalRequirements*100):0,"%"]}),(0,a.jsxs)("p",{className:"text-sm text-green-600",children:[null==d?void 0:d.compliantRequirements," of ",null==d?void 0:d.totalRequirements," requirements"]})]}),(0,a.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,a.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"Critical Issues"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:null==d?void 0:d.nonCompliantRequirements}),(0,a.jsx)("p",{className:"text-sm text-red-600",children:"Require immediate attention"})]}),(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,a.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"Under Review"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:null==d?void 0:d.underReviewRequirements}),(0,a.jsx)("p",{className:"text-sm text-yellow-600",children:"Pending compliance check"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-100 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Audit Activity"}),(0,a.jsx)("div",{className:"space-y-3",children:e.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(N(e.status)),children:e.status}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.action}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["by ",e.user]})]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]},e.id))})]})]})]})}}},e=>{e.O(0,[636,6593,8792],()=>e(e.s=2590)),_N_E=e.O()}]);