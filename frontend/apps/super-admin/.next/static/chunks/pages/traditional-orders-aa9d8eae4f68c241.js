(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4487],{347:(e,s,t)=>{"use strict";t.d(s,{BT:()=>n,Wu:()=>i,ZB:()=>c,Zp:()=>r,aR:()=>l});var a=t(72);t(4);let r=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"bg-white border rounded-lg shadow ".concat(t),children:s})},l=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 border-b ".concat(t),children:s})},c=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("h3",{className:"text-lg font-semibold ".concat(t),children:s})},n=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1 ".concat(t),children:s})},i=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 ".concat(t),children:s})}},3413:(e,s,t)=>{"use strict";t.d(s,{$:()=>r});var a=t(72);let r=t(4).forwardRef((e,s)=>{let{children:t,className:r="",size:l="md",variant:c="default",...n}=e;return(0,a.jsx)("button",{ref:s,className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[l]," ").concat({default:"bg-blue-600 text-white hover:bg-blue-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",destructive:"bg-red-600 text-white hover:bg-red-700"}[c]," disabled:opacity-50 disabled:cursor-not-allowed ").concat(r),...n,children:t})});r.displayName="Button"},6166:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5935).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},6462:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/traditional-orders",function(){return t(6989)}])},6989:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(72),r=t(4),l=t(6316),c=t.n(l),n=t(347),i=t(3413),d=t(5814),o=t(9998),x=t(9894),h=t(8798),m=t(4555),p=t(5271),u=t(6166),j=t(4580);function y(){let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)([]),[y,N]=(0,r.useState)(!0),[b,g]=(0,r.useState)("all"),[v,f]=(0,r.useState)("all"),[w,_]=(0,r.useState)([]);(0,r.useEffect)(()=>{k(),A(),S()},[b,v]);let k=async()=>{try{let e=await j.A.get("/api/traditional/system-statistics");s(e.data.data)}catch(e){console.error("Error fetching statistics:",e)}},A=async()=>{try{let e=await j.A.get("/api/company-management/branches");_(e.data)}catch(e){console.error("Error fetching branches:",e)}},S=async()=>{N(!0);try{let e="/api/traditional/all-orders?limit=100";"all"!==b&&(e+="&status=".concat(b)),"all"!==v&&(e+="&branch_id=".concat(v));let s=await j.A.get(e);l(s.data.data||[])}catch(e){console.error("Error fetching orders:",e)}finally{N(!1)}},M=e=>{switch(e){case"ordinary":return{symbol:"₹",color:"text-gray-600"};case"medium":return{symbol:"₹₹",color:"text-blue-600"};case"best":return{symbol:"₹₹₹",color:"text-emerald-600"};default:return{symbol:e,color:"text-gray-600"}}};return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"Traditional Orders System - Super Admin"})}),(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Traditional Orders System"}),(0,a.jsx)("p",{className:"text-gray-600",children:"System-wide overview and management for traditional home supplies"})]}),e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,a.jsx)(n.Zp,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Orders"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:e.overview.total_orders})]}),(0,a.jsx)(d.A,{className:"w-10 h-10 text-emerald-500"})]})}),(0,a.jsx)(n.Zp,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-3xl font-bold",children:["₹",e.overview.total_revenue.toFixed(0)]})]}),(0,a.jsx)(o.A,{className:"w-10 h-10 text-green-500"})]})}),(0,a.jsx)(n.Zp,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Unique Customers"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:e.overview.unique_customers})]}),(0,a.jsx)(x.A,{className:"w-10 h-10 text-blue-500"})]})}),(0,a.jsx)(n.Zp,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Active Branches"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:e.overview.active_branches})]}),(0,a.jsx)(h.A,{className:"w-10 h-10 text-purple-500"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)(n.Zp,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"}),"Order Status Distribution"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Pending"}),(0,a.jsx)("span",{className:"font-semibold text-yellow-600",children:e.overview.pending_orders})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Processing"}),(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:e.overview.processing_orders})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Shipped"}),(0,a.jsx)("span",{className:"font-semibold text-purple-600",children:e.overview.shipped_orders})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"Delivered"}),(0,a.jsx)("span",{className:"font-semibold text-green-600",children:e.overview.delivered_orders})]})]})]}),(0,a.jsxs)(n.Zp,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"w-5 h-5"}),"Quality Tier Performance"]}),(0,a.jsx)("div",{className:"space-y-3",children:e.quality_breakdown.map(e=>{let s=M(e.quality_tier);return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm ".concat(s.color," font-medium"),children:[s.symbol," ",e.quality_tier.charAt(0).toUpperCase()+e.quality_tier.slice(1)]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("span",{className:"font-semibold",children:[e.count," orders"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["₹",e.revenue.toFixed(0)]})]})]},e.quality_tier)})})]})]}),(0,a.jsxs)(n.Zp,{className:"p-6 mb-8",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"Branch Performance"]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left py-2",children:"Branch"}),(0,a.jsx)("th",{className:"text-right py-2",children:"Orders"}),(0,a.jsx)("th",{className:"text-right py-2",children:"Revenue"}),(0,a.jsx)("th",{className:"text-right py-2",children:"Avg Order Value"})]})}),(0,a.jsx)("tbody",{children:e.branch_performance.map(e=>{var s;return(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"py-2",children:e.branch_name}),(0,a.jsx)("td",{className:"text-right",children:e.order_count}),(0,a.jsxs)("td",{className:"text-right",children:["₹",(null==(s=e.revenue)?void 0:s.toFixed(0))||"0"]}),(0,a.jsxs)("td",{className:"text-right",children:["₹",e.order_count>0?(e.revenue/e.order_count).toFixed(0):"0"]})]},e.branch_name)})})]})})]})]}),(0,a.jsxs)(n.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Recent Orders"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{value:b,onChange:e=>g(e.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"processing",children:"Processing"}),(0,a.jsx)("option",{value:"shipped",children:"Shipped"}),(0,a.jsx)("option",{value:"delivered",children:"Delivered"})]}),(0,a.jsxs)("select",{value:v,onChange:e=>f(e.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Branches"}),w.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsxs)(i.$,{onClick:()=>{let e=new Blob([["Order ID,Customer,Branch,Quality,Amount,Status,Date",...t.map(e=>[e.id,e.customer_name,e.branch_name,e.quality_tier,e.total_amount,e.order_status,new Date(e.order_date).toLocaleDateString()].join(","))].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="traditional-orders-".concat(new Date().toISOString().split("T")[0],".csv"),a.click()},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),"Export"]})]})]}),y?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500 mx-auto"})}):0===t.length?(0,a.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No orders found"}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left py-3",children:"Order ID"}),(0,a.jsx)("th",{className:"text-left py-3",children:"Customer"}),(0,a.jsx)("th",{className:"text-left py-3",children:"Branch"}),(0,a.jsx)("th",{className:"text-left py-3",children:"Quality"}),(0,a.jsx)("th",{className:"text-right py-3",children:"Amount"}),(0,a.jsx)("th",{className:"text-left py-3",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-3",children:"Date"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>{let s=M(e.quality_tier);return(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"py-3",children:["#",e.id]}),(0,a.jsx)("td",{className:"py-3",children:e.customer_name}),(0,a.jsx)("td",{className:"py-3",children:e.branch_name}),(0,a.jsx)("td",{className:"py-3 ".concat(s.color),children:s.symbol}),(0,a.jsxs)("td",{className:"py-3 text-right",children:["₹",e.total_amount]}),(0,a.jsx)("td",{className:"py-3",children:(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs\n                            ".concat("pending"===e.order_status?"bg-yellow-100 text-yellow-800":"","\n                            ").concat("processing"===e.order_status?"bg-blue-100 text-blue-800":"","\n                            ").concat("shipped"===e.order_status?"bg-purple-100 text-purple-800":"","\n                            ").concat("delivered"===e.order_status?"bg-green-100 text-green-800":"","\n                          "),children:e.order_status})}),(0,a.jsx)("td",{className:"py-3",children:new Date(e.order_date).toLocaleDateString()})]},e.id)})})]})})]})]})]})}},8798:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5935).A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},9894:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5935).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{e.O(0,[8963,636,6593,8792],()=>e(e.s=6462)),_N_E=e.O()}]);