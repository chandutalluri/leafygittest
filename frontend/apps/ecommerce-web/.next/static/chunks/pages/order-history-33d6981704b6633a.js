(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{208:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/order-history",function(){return a(7600)}])},241:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(4);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))})},7600:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(72),r=a(4),l=a(1835),n=a(7014),i=a(6316),d=a.n(i),c=a(7698),o=a.n(c),m=a(5565);let x=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var u=a(9852);let h=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var g=a(241),p=a(8033),f=a(5542),y=a(9430),v=a(8939),j=a(4018);function b(){let{user:e,isAuthenticated:t}=(0,v.n)(),[a,i]=(0,r.useState)("all"),{data:c,isLoading:b,error:w}=(0,n.I)({queryKey:["orders",null==e?void 0:e.id],queryFn:async()=>{let e=await fetch("/api/order-management/orders");if(!e.ok)throw Error("Failed to fetch orders");return e.json()},enabled:!!(null==e?void 0:e.id)});if(!t||!e)return(0,s.jsx)("div",{className:"min-h-screen pt-24 px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsxs)(p.A,{className:"text-center py-16",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Please Sign In"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to view your order history."}),(0,s.jsx)(o(),{href:"/auth/login",className:"glass-button px-6 py-3 text-white bg-leaf-600 hover:bg-leaf-700 font-semibold",children:"Sign In"})]})})});let N=(null==c?void 0:c.data)||[],k="all"===a?N:N.filter(e=>e.status===a),E=e=>{switch(e){case"pending":return(0,s.jsx)(m.A,{className:"h-5 w-5 text-yellow-500"});case"confirmed":return(0,s.jsx)(x,{className:"h-5 w-5 text-blue-500"});case"preparing":return(0,s.jsx)(m.A,{className:"h-5 w-5 text-orange-500"});case"ready":return(0,s.jsx)(u.A,{className:"h-5 w-5 text-green-500"});case"delivered":return(0,s.jsx)(x,{className:"h-5 w-5 text-green-600"});case"cancelled":return(0,s.jsx)(h,{className:"h-5 w-5 text-red-500"});default:return(0,s.jsx)(m.A,{className:"h-5 w-5 text-gray-500"})}},A=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"preparing":return"bg-orange-100 text-orange-800 border-orange-200";case"ready":case"delivered":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d(),{children:[(0,s.jsx)("title",{children:"Order History - LeafyHealth"}),(0,s.jsx)("meta",{name:"description",content:"View your order history and track current orders"})]}),(0,s.jsx)("div",{className:"min-h-screen pt-24 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Order History"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Track your orders and view your purchase history"})]}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-8",children:(0,s.jsx)(p.A,{className:"p-4",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"All Orders",count:N.length},{value:"pending",label:"Pending",count:N.filter(e=>"pending"===e.status).length},{value:"confirmed",label:"Confirmed",count:N.filter(e=>"confirmed"===e.status).length},{value:"preparing",label:"Preparing",count:N.filter(e=>"preparing"===e.status).length},{value:"ready",label:"Ready",count:N.filter(e=>"ready"===e.status).length},{value:"delivered",label:"Delivered",count:N.filter(e=>"delivered"===e.status).length}].map(e=>(0,s.jsxs)("button",{onClick:()=>i(e.value),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(a===e.value?"bg-leaf-600 text-white":"glass-button text-gray-700 hover:bg-white/30"),children:[e.label," (",e.count,")"]},e.value))})})}),b?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(y.A,{className:"h-32 w-full"},t))}):w?(0,s.jsx)(f.A,{children:(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-red-600",children:"Failed to load orders. Please try again later."})})}):0===k.length?(0,s.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},children:(0,s.jsxs)(p.A,{className:"text-center py-16",children:[(0,s.jsx)(g.A,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"all"===a?"No orders yet":"No ".concat(a," orders")}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"all"===a?"You haven't placed any orders yet. Start shopping for fresh organic products!":"You don't have any ".concat(a," orders at the moment.")}),(0,s.jsx)(o(),{href:"/products",className:"inline-flex items-center px-6 py-3 glass-button text-white bg-leaf-600 hover:bg-leaf-700 font-semibold",children:"Start Shopping"})]})}):(0,s.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"space-y-6",children:k.map((e,t)=>(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*t},children:(0,s.jsxs)(p.A,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",e.id.slice(-8)]}),(0,s.jsxs)("div",{className:"inline-flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium border ".concat(A(e.status)),children:[E(e.status),(0,s.jsx)("span",{className:"capitalize",children:e.status})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-sm text-gray-600",children:[(0,s.jsxs)("span",{children:["Placed on ",(0,j.Yq)(e.createdAt)]}),(0,s.jsx)("span",{className:"hidden sm:block",children:"•"}),(0,s.jsxs)("span",{children:[e.items.length," items"]}),(0,s.jsx)("span",{className:"hidden sm:block",children:"•"}),(0,s.jsx)("span",{className:"font-medium text-gray-800",children:(0,j.$g)(e.total)})]})]}),(0,s.jsxs)("div",{className:"mt-4 lg:mt-0 flex space-x-3",children:[(0,s.jsx)(o(),{href:"/order/".concat(e.id),className:"glass-button px-4 py-2 text-leaf-600 hover:bg-leaf-100 text-sm font-medium",children:"View Details"}),"delivered"===e.status&&(0,s.jsx)("button",{className:"glass-button px-4 py-2 text-gray-600 hover:bg-gray-100 text-sm font-medium",children:"Reorder"})]})]}),(0,s.jsx)("div",{className:"border-t pt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.items.slice(0,6).map(e=>(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative w-16 h-16 mx-auto mb-2 rounded-lg overflow-hidden bg-gray-100",children:[e.image?(0,s.jsx)("img",{src:"http://localhost:8080/api/image-management/serve/".concat(e.image),alt:e.name,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"\uD83E\uDD6C"}),e.quantity>1&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 bg-leaf-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:e.quantity})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 truncate",children:e.name})]},e.id)),e.items.length>6&&(0,s.jsx)("div",{className:"text-center flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 glass-card rounded-lg flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["+",e.items.length-6]})})})]})}),e.estimatedDelivery&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-leaf-50 border border-leaf-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 text-leaf-600"}),(0,s.jsx)("span",{className:"text-sm text-leaf-800",children:"delivered"===e.status?"Delivered on ".concat((0,j.Yq)(e.estimatedDelivery)):"Estimated delivery: ".concat((0,j.Yq)(e.estimatedDelivery))})]})})]})},e.id))})]})})]})}},9430:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(72),r=a(4018);function l(e){let{className:t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse bg-gray-200 rounded-lg",t)})}},9852:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(4);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[133,636,593,792],()=>t(208)),_N_E=e.O()}]);