(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{998:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(72),s=a(4),i=a(6316),n=a.n(i),l=a(983),c=a(7698),o=a.n(c),d=a(1835),x=a(7014),u=a(9983),m=a(7591);let h=s.forwardRef(function(e,t){let{title:a,titleId:r,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}),g=s.forwardRef(function(e,t){let{title:a,titleId:r,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))});var p=a(6747),v=a(8451),j=a(8489);let f=s.forwardRef(function(e,t){let{title:a,titleId:r,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))});var y=a(4239),w=a(3644),b=a(9178),N=a(7977),k=a(1288),P=a(8033),A=a(4018),E=a(1961);function C(){let{id:e}=(0,l.useRouter)().query,[t,a]=(0,s.useState)(1),[i,c]=(0,s.useState)(0),[C,L]=(0,s.useState)(!1),{selectedBranch:q}=(0,w.x)(),{addItem:O}=(0,b.x)(),{data:T,isLoading:_}=(0,x.I)({queryKey:["product",e],queryFn:async()=>{try{return await y.u.getProduct(e)}catch(e){return null}},enabled:!!e,retry:!1});if(_)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"Loading Product - LeafyHealth"})}),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50",children:[(0,r.jsx)(N.A,{}),(0,r.jsx)("div",{className:"pt-24 pb-16",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,r.jsx)("div",{className:"h-96 bg-gray-200 rounded-2xl animate-pulse"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-20 bg-gray-200 rounded animate-pulse"})]})]})})})]})]});if(!(null==T?void 0:T.data))return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"Product Not Found - LeafyHealth"})}),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50",children:[(0,r.jsx)(N.A,{}),(0,r.jsx)("div",{className:"pt-24 pb-16",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:(0,r.jsxs)(P.A,{className:"p-12 max-w-md mx-auto",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Product Not Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"The product you're looking for doesn't exist or has been removed."}),(0,r.jsx)(o(),{href:"/products",children:(0,r.jsx)(d.P.button,{className:"bg-green-500 text-white px-6 py-3 rounded-xl font-medium hover:bg-green-600 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Browse Products"})})]})})})]})]});let S=null==T?void 0:T.data,D=S.images||[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[(0,r.jsxs)("title",{children:[S.name," - LeafyHealth"]}),(0,r.jsx)("meta",{name:"description",content:S.description})]}),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50",children:[(0,r.jsx)(N.A,{}),(0,r.jsx)("div",{className:"pt-24 pb-16",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)(d.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-8",children:(0,r.jsxs)(o(),{href:"/products",className:"inline-flex items-center space-x-2 text-gray-600 hover:text-green-600 transition-colors",children:[(0,r.jsx)(u.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Back to Products"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,r.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:(0,r.jsxs)(P.A,{className:"p-6",children:[(0,r.jsx)("div",{className:"aspect-square bg-gray-100 rounded-xl mb-4 overflow-hidden",children:D.length>0?(0,r.jsx)("img",{src:D[i],alt:S.name,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-6xl text-gray-400",children:"\uD83E\uDD55"})}),D.length>1&&(0,r.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:D.map((e,t)=>(0,r.jsx)("button",{onClick:()=>c(t),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-colors ".concat(i===t?"border-green-500":"border-gray-200"),children:(0,r.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover"})},t))})]})}),(0,r.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:S.name}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{L(!C),E.Ay.success(C?"Removed from wishlist":"Added to wishlist")},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:C?(0,r.jsx)(f,{className:"h-6 w-6 text-red-500"}):(0,r.jsx)(m.A,{className:"h-6 w-6"})}),(0,r.jsx)("button",{onClick:()=>{if(navigator.share){var e,t;navigator.share({title:null==T||null==(e=T.data)?void 0:e.name,text:null==T||null==(t=T.data)?void 0:t.description,url:window.location.href})}else navigator.clipboard.writeText(window.location.href),E.Ay.success("Product link copied to clipboard")},className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",children:(0,r.jsx)(h,{className:"h-6 w-6"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsx)("span",{className:"text-3xl font-bold text-green-600",children:(0,A.$g)(S.price)}),S.originalPrice&&S.originalPrice>S.price&&(0,r.jsx)("span",{className:"text-lg text-gray-400 line-through",children:(0,A.$g)(S.originalPrice)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,r.jsx)("div",{className:"flex",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(g,{className:"h-5 w-5 ".concat(t<(S.rating||4.5)?"text-yellow-400 fill-current":"text-gray-300")},t))}),(0,r.jsxs)("span",{className:"text-gray-600",children:["(",S.reviewCount||0," reviews)"]})]})]}),(0,r.jsxs)(P.A,{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Description"}),(0,r.jsx)("p",{className:"text-gray-600 leading-relaxed",children:S.description||"Fresh, organic produce delivered straight from our certified farms."})]}),(0,r.jsxs)(P.A,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Quantity"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[S.stockQuantity||0," available"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{onClick:()=>a(Math.max(1,t-1)),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:(0,r.jsx)(p.A,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"text-xl font-semibold min-w-8 text-center",children:t}),(0,r.jsx)("button",{onClick:()=>a(Math.min(S.stockQuantity||99,t+1)),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:(0,r.jsx)(v.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)(d.P.button,{onClick:()=>{if(!q)return void E.Ay.error("Please select a delivery location first");if(!(null==T?void 0:T.data))return void E.Ay.error("Product not available");for(let a=0;a<t;a++){var e;O({id:T.data.id,name:T.data.name,price:T.data.price,image:(null==(e=T.data.images)?void 0:e[0])||"",category:T.data.category,branchId:q.id,maxQuantity:T.data.stockQuantity})}E.Ay.success("".concat(t," \xd7 ").concat(T.data.name," added to cart!"))},className:"w-full bg-green-500 text-white py-4 px-6 rounded-xl font-semibold hover:bg-green-600 transition-colors flex items-center justify-center space-x-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,r.jsx)(j.A,{className:"h-5 w-5"}),(0,r.jsxs)("span",{children:["Add to Cart â¢ ",(0,A.$g)(S.price*t)]})]})]})]})]})]})}),(0,r.jsx)(k.A,{})]})]})}},2254:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[id]",function(){return a(998)}])},4239:(e,t,a)=>{"use strict";a.d(t,{u:()=>i}),a(7976);let r=window.location.origin;class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r="".concat(this.baseURL).concat(e),s={headers:{"Content-Type":"application/json",...t.headers},mode:"cors",credentials:"same-origin",...t};for(let e=1;e<=a;e++)try{let t=await fetch(r,s);if(502===t.status&&e<a){console.log("Service starting up, retrying in ".concat(1e3*e,"ms...")),await new Promise(t=>setTimeout(t,1e3*e));continue}if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.json()}catch(t){if(console.error("API request failed (attempt ".concat(e,"/").concat(a,"):"),t),e===a)throw t;e<a&&await new Promise(t=>setTimeout(t,1e3*e))}}async getProducts(e,t){let a=e?"?".concat(e.toString()):"",r=t?"/api/products".concat(a,"&branchId=").concat(t):"/api/products".concat(a);return this.request(r)}async getCategories(){return this.request("/api/categories")}async getBranches(){return this.request("/api/branches")}async getProduct(e){return this.request("/api/products/".concat(e))}async login(e,t){return this.request("/api/auth/internal/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getOrders(e){return this.request(e?"/api/direct-data/orders?branchId=".concat(e):"/api/direct-data/orders")}async createOrder(e){return this.request("/api/direct-data/orders",{method:"POST",body:JSON.stringify(e)})}async getInventory(e){return this.request(e?"/api/direct-data/inventory?branchId=".concat(e):"/api/direct-data/inventory")}async processPayment(e){return this.request("/api/payment-processing/process",{method:"POST",body:JSON.stringify(e)})}constructor(e){this.baseURL=e}}let i=new s(r)},7591:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(4);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))})},9983:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(4);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[133,636,593,792],()=>t(2254)),_N_E=e.O()}]);